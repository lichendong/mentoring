---
title: "Data Wrangling using Tidyverse"
author: "LiChen Dong"
date: "`r lubridate::today()`"
format: 
  html: 
    embed-resources: true
    toc: true 
    toc_depth: 4
editor_options: 
  chunk_output_type: console
---

# Introduction

## Naming Conventions

We will stick with *snake case* for naming convention. Briefly, name files and folders with all lower-case letters and separate words with underscores (e.g., `starbucks_data.csv`). Note that spaces in file names can cause issues when reading them into R. Additionally, snake case is “tidy” format, and we will be using the tidy style guide throughout the course for coding consistency.


## Directory Structure

When working with data, there can be a lot of files that makes your computer folders look messy. To keep things organized, you will need a directory (i.e. folder) on your computer dedicated to your work in the lab, where you save all the data files, Quarto notebooks, etc. 

- Create a folder called `sbdl` somewhere on your computer. 
- Inside the sbdl folder, create one subfolder named `data`.

## R project

Finally, we are going to create an R project at the root of your sbdl directory. Anytime we use R for lab work, we will boot R by opening this project. It will allow for consistency in file paths across people and computers (i.e., even if people save their folders in different places in their computers) and it is considered as a best practice when working with data.

- In RStudio, go to the File menu -> New Project. 
- Select Existing Directory and select your `sbdl` folder as the project working directory. 
- Then, click Create Directory.

Once you are done, a new R session should pop-up. You will also see in your `sbdl` directory a new R project file. In the future, you can start your R session by double-clicking this project.


# Getting started with a standard workflow

We follow a set of best practices to ensure that our code is maximally replicable.


## Set Conflict Policies

We will often use R functions created and shared by other people by loading R packages. Conflict policies are important so that we know if we load two packages with conflicting functions (i.e., different functions with same name). Using `options(conflicts.policy = "depends.ok")` at the top of your setup code chunk (i.e., before you load any packages) will produce an error if two conflicting packages are loaded. There are ways to set custom conflict policies and work around conflicts (e.g., only loading certain functions from a package).  

```{r}
options(conflicts.policy = "depends.ok")
```


## Load Packages

You should load the **minimum** number of packages needed to execute your code. Oftentimes this may just be `tidyverse`. Loading as few packages as possible also helps reduce the likelihood of conflicts.   


To load packages, use the `library()` function. If you have never installed the package, you will need to do that using `install.packages()` before using the package for the first time.

```{r}
library(tidyverse)
```


## Set Path  

You will often need to read in data from files saved on your computer. By using a ***relative path*** to specify file locations, the same code can be used to read in files without causing errors when run by different users or even on different computers (especially useful for Github repo!), if the directory is structured the same way. In other words, relative paths allow for easier collaboration and code sharing!


We can use the `getwd()` to check our current working directory, which should be the root folder where your R project file is saved. Next, we will type in the relative location of your data in reference to the root folder save it as an R object. Below, a hypothetical example of path_data is provided.

```{r}
getwd()
path_data <- "g_e_study_2024/data"
```

## Template

A template can be found in the mentoring repo under `workflow_template`. You can download and adapt it and simply copy and paste the template for future data analysis.
